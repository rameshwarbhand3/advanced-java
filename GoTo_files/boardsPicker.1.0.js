(()=>{"use strict";var e,o,n;!function(e){e.READY="ready",e.PICK="pick",e.NOAUTH="noauth",e.ERROR="error",e.NEED_TOKEN="token",e.OPEN_URL="open-url"}(e||(e={})),function(e){e.INIT="init",e.TOKEN="token",e.SHOW_ERROR="error"}(o||(o={}));class t{constructor(e,o){this.guid=e,this.payload=o,this.guid=e,this.payload=o}}class a extends t{constructor(e){super(e),this.type=o.INIT}}class r extends t{constructor(e,n){super(e,n),this.type=o.TOKEN}}class i extends t{constructor(e,n){super(e,n),this.type=o.SHOW_ERROR}}function s(e){let o=e.toString(16);for(;o.length<2;)o="0"+o;return o}!function(e){e.SELECT="select",e.ACCESS_LINK="access-link",e.GET_ACCESS_LINK="get-access-link"}(n||(n={}));const E=n;var _,c,T,A,d,O,l,I,N,R,p;function S(e){const o="localhost"===location.host,n=o?location.host:e.baseHost,t=`${location.protocol}//`;return e.global?`${t}${n}`:!o&&e.newRoutingSchema?`${t}${e.domainName?`${e.domainName}.`:""}${n}`:`${t}${n}/s/${e.key}`}function L(e){const o=S(e.workspace);return new URL(`${o}/app/board/${e.boardId}/`).toString()}!function(e){e.IGNORE_UPDATE_CONFIG="ignoreUpdateConfig",e.FAKE_SERVER_UNAVAILABLE="fake_server_unavailable",e.DISABLE_LOCAL_STORAGE="disableLocalStorage",e.DEBUG_ACHIEVEMENTS="debugAchievements",e.DEBUG="debug",e.DEBUG_FONT_STYLE="debugFontStyle",e.SHOW_WOOTRIC="showWootric",e.CIRCLE_ONBOARDING="circleOnboarding",e.DISABLE_WHATS_NEW="disableWhatsNew",e.FORCE_WHATS_NEW="forceWhatsNew",e.NO_NEED_TO_HACK_POST_MESSAGE="noNeedToHackPostMessage",e.USE_API_FOR_AUTH="use_api_for_auth",e.FAKE_APP_START_FAILURE="fake_app_start_failure",e.AB_TESTS="ab_tests",e.SHOWTIME_UI_AUTOHIDE_DELAY="showtime_ui_autohide_delay",e.SHOWTIME_UI_DISABLE_FULLSCREEN="showtime_ui_disable_fullscreen",e.DISABLE_TUTORIAL="disable_tutorial",e.TALKTRACK_PRESENT_DISABLE_FULLSCREEN="talktrack_present_disable_fullscreen",e.PRELOAD_MODULES="preload-modules",e.LOAD_BOARD_UI="load-board-ui",e.BOARD_INFO_TIMEOUT="board-info-timeout",e.BOARD_UI_TIMEOUT="board-ui-timeout",e.BOARD_CONNECTION_TIMEOUT="board-con-timeout",e.SKIP_RENDER_SYSTEM="skip-render-system",e.SKIP_VISUAL_SYSTEM="skip-visual-system",e.CREATE_ALL_WIDGETS_AT_ONCE="create-all-widgets-at-once",e.ROAD_TO_JSON="roadToJson",e.USE_POST_AUTH="usePostAuth",e.WELCOME="welcome"}(_||(_={})),function(e){e.LOG_TIME="logTime",e.PLOG="plog",e.LOG_SDK_COMMANDS="logSdkCommands"}(c||(c={})),function(e){e.MOBILE="mobile"}(T||(T={})),function(e){e.DEBUG_SNAPSHOT_IN_NEW_TAB="debugSnapshotInNewTab",e.PREVIEW_TYPE="previewType",e.WIDGET_ID="widgetId",e.MIN_LEFT="minLeft",e.MIN_TOP="minTop",e.MAX_RIGHT="maxRight",e.MAX_BOTTOM="maxBottom",e.VIEWPORT_WIDTH="viewportWidth",e.VIEWPORT_HEIGHT="viewportHeight",e.SCREEN_WIDTH="screenWidth",e.SCREEN_HEIGHT="screenHeight",e.EXPORT_FORMAT="exportFormat",e.FRAME_ID="frameId",e.PRESENTATION_MODE="pres",e.FEED_THUMBNAIL_LAYOUT="feedThumbnailLayout"}(A||(A={})),function(e){e.ACCESS_TOKEN="accessToken",e.BOARD_ACCESS_TOKEN="boardAccessToken",e.POST_MESSAGE_URL_OPENER="postMessageUrlOpener",e.PARENT_DOMAIN="parentDomain",e.EMBED_MODE="embedMode",e.EMBED_AUTO_PLAY="embedAutoplay",e.EXTERNAL_AUTH_FLOW="externalAuthFlow"}(d||(d={})),function(e){e.EMBED_ID="embedId",e.AUTO_PLAY="autoplay"}(O||(O={})),function(e){e.OPEN_WIREFRAMES="openWireframes",e.OPEN_SHAPE_LIBRARY="openShapeLibrary",e.OPEN_DIAGRAMMING_IMPORT="openDiagrammingImport",e.CREATE_BUSINESS_PLAN="createBusinessPlan",e.CREATE_BUSINESS_PLAN_TRIAL="createBusinessPlanTrial",e.CREATE_CONSULTANT_PLAN="createConsultantPlan",e.CREATE_TEAM_PLAN="createTeamPlan",e.MOBILE_AUTO_TEST="mobileAutotest",e.INVITE="invite",e.SHAREABLE_PRESENTATION="shareablePresentation"}(l||(l={})),function(e){e.NO_LIMITS="noLimits",e.CREATE_DEV_TEAM="createDevTeam",e.CREATE_FREE_TEAM2018="createFreeTeam2018",e.NAVIGATION_SESSION_ID="navigationSessionId",e.MID="mid",e.PROJECT_ID="projectId",e.SPACE_ID="spaceId",e.UTM_CONTENT="utm_content",e.MESSENGER="messenger",e.UTM_MEDIUM="utm_medium",e.UTM_CAMPAIGN="utm_campaign",e.CHANNEL_ID="slack_channel_id",e.NUM_OF_USERS="num_of_users",e.FSDURATION="fsduration",e.CONTENTFUL_ENVIRONMENT="contentfulEnvironment",e.FROM_EMBED="fromEmbed",e.INSPIRATION_CENTER_VISIBLE="inspirationCenter.visible",e.AUTOTEST="autotest",e.USE_TEMPLATE="useTemplate",e.AUTH_FAIL_REDIRECT="authFailRedirect",e.BILLING_PAGE="billingPage",e.APPLICATION_ID="applicationId",e.TEAM_PRIVACY_SECTION_SCROLL_TO="team_privacy",e.EXTENDED_CONTENT_ADMIN_PERMISSIONS_SECTION_SCROLL_TO="extended-cap-permissions",e.DOMAIN_CONTROL_SCROLL_TO="domain_control",e.BLOCK_DEACTIVATED_USERS_SCROLL_TO="block-deactivated-users",e.INVITATION_LINK_SCROLL_TO="invitation_link",e.CUSTOM_TEMPLATES_COMPANY_SHARING_SCROLL_TO="ct-company-sharing",e.CONFIRMATION_CODE="saml-confirmation-code",e.CONFIRMATION_DOMAIN="saml-confirmation-domain",e.IN_APP_PRICING_VISIBLE="inAppPricing.visible",e.SWITCH_TO_YEARLY="switchToYearly",e.INVITE_MODAL_VISIBLE="inviteModal.visible",e.CREATE_PROJECT_MODAL_VISIBLE="createProjectModal.visible",e.LOAD_SDK="loadSdk",e.STATS="stats",e.CREATE_SCALE_MODE="scs",e.FIRST_LOGIN="firstLogin",e.EXTERNAL_APP_URL="externalAppUrl",e.EXTERNAL_APP_NAME="externalAppName",e.SHOW_UPGRADE="showUpgrade",e.CANVAS_OBJECT_TYPE="cot",e.MOVE_TO_OBJECT="moveToWidget",e.NOTES_SCROLL_TO="notesScrollTo",e.OPEN_NOTE_COMMENT="openNoteComment",e.OPEN_NOTE_MENTION="openNoteMention",e.OPEN_NOTES="openNotes",e.SHARE_BOARD="shareBoard",e.OPEN_CHAT="openChat",e.OPEN_COMMENT="openComment",e.OPEN_COMMENTS="openComments",e.OPEN_ACTIVITY="openActivity",e.OPEN_FRAMES="openFrames",e.OPEN_CARD_PANEL="openCardPanel",e.OPEN_VOTING="openVoting",e.SCREEN_READER_MODE="screenReaderMode",e.COPY_BOARD_ID="copyBoardId",e.COPY_BOARD_TITLE="copyBoardTitle",e.COPY_BOARD_ACCOUNT_ID="copyBoardAccountId",e.COPY_TEMPLATE_BOARD_META_ID="copyTemplateMetaId",e.COPY_TEMPLATE_ID="copyTemplateId",e.CREATE_NEW_BOARD="createNewBoard",e.MIRO_NEW_BOARD="miroNewBoard",e.MIRO_NEW_BOARD_ACCOUNT_ID="miroNewBoardAccountId",e.MIRO_NEW_WORKSHOP="miroNewWorkshop",e.CREATE_BOARD_FROM_GOOGLE_DRIVE="createBoardFromGoogleDrive",e.TEMPLATES_PICKER_PRESELECTED_CATEGORY="templatesPickerPreselectedCategory",e.TEMPLATES_PICKER_PRESELECTED_TEMPLATE="tpTemplate",e.TEMPLATES_PICKER_IS_CUSTOM_TEMPLATE="isCustom",e.FOLDER_ID="folderId",e.REINSTALL_SLACK_APP="reinstallSlackApp",e.CHANNEL="channel",e.MOVE_TO_VIEWPORT="moveToViewport",e.PRESENTATION_FRAME="presentationFrame",e.RUN_PRESENTATION="runPresentation",e.ACTIVATE_STARTUP="activateStartup",e.ENABLE_CURSORS="enableCursors",e.CLIENT_MODE="clientMode",e.TARGET_BOARD_ID="targetBoardId",e.SHARING_INTENT_ID="sharingIntentId",e.SHARING_INTENT_EMAIL="sharingIntentEmail",e.FPS_OUTPUT="fps_output",e.HAS_DEVTOOLS="hasDevTools",e.INSERT_TEMPLATE="insertTemplate",e.CODE="code",e.REASON="reason",e.MESSAGE="message",e.MIRO_PRO_NETWORK="mpn",e.IS_MIRO_LITE_SHARED_LINK="isMiroLiteSharedLink",e.GOOGLE_AUTH_URL="googleAuthUrl",e.WORKSPACE="workspace",e.IS_MIRO_LITE_STANDALONE="isMiroLiteStandalone",e.DOMAIN_MODE="domainMode",e.FROM_MIRO_LITE="fromMiroLite",e.TEMPLATE_NAME="templateName",e.APP_SUBMISSION_DIALOG_REFERRER="asd-referrer",e.BOARD_ACCESS_TOKEN="boardAccessToken",e.CANCEL_AT_PERIOD_END="cancelAtPeriodEnd",e.MARKETPLACE_HOST="marketplaceHost",e.BOARD_RECORDING_PLAYBACK_NO_UI="playbackNoUi",e.BOARD_VERSION="board_version",e.BOARD_RECORDING_PLAY_RECORDING="playRecording",e.WELCOME_BACK_MODAL="welcomeBack",e.DISABLE_FONTS="disable-fonts",e.MIRO_IN_MIRO="miroInMiro",e.NO_TR="no-tr",e.CLUSTER_TYPE="clusterType",e.CLUSTER_SUMMARY="clusterSummary",e.OPEN_ASSIGN_ACTION_COMMENT="openAssignActionComment",e.CLUSTER_APPROACH="clusterApproach"}(I||(I={})),function(e){e.EMAIL="email",e.USER_EMAIL="userEmail",e.MAIL_USER_EMAIL="mailUserEmail",e.ID="id",e.SELECTED_LICENSE="selectedLicense",e.INVITES="invites",e.CHANGE_TO_FULL="changeToFull",e.SORT_BY_ADDING_DATE_DESC="sortByAddingDateDesc",e.ADD_GUESTS_AS_MEMBERS_REQUEST_ID="addGuestsAsMembersRequestId"}(N||(N={})),function(e){e.FLOW_TYPE="flow_type",e.FLOW_FEATURE="flow_feature",e.INVITE_ENTRY_POINT="invite_entry_point"}(R||(R={})),function(e){e.COLLABORATION="collaboration",e.VIEW_ONLY_WITHOUT_UI="view_only_without_ui"}(p||(p={})),p.COLLABORATION;const u=[p.COLLABORATION,p.VIEW_ONLY_WITHOUT_UI],m=document.currentScript&&document.currentScript.getAttribute("data-debug-origin")||"https://miro.com",C=new URL(`${m}/app/boards-picker/`);C.searchParams.append("parentOrigin",location.origin);const M=window;M.miroBoardsPicker=M.rtbBoardsPicker={open:function(o){let n;!function(e){var o,n;if(!e.action)throw new Error("'action' option is required");if("select"!==e.action&&"access-link"!==e.action&&"get-access-link"!==e.action)throw new Error(`Wrong 'action' option is ${e.action}. Available values are 'select' or 'access-link'`);if("get-access-link"===e.action){if("string"!=typeof(null===(o=e.accessLinkOptions)||void 0===o?void 0:o.boardId))throw new Error("'accessLinkOptions.boardId' option is required");if("string"!=typeof(null===(n=e.accessLinkOptions)||void 0===n?void 0:n.policy))throw new Error("'accessLinkOptions.policy' option is required. Available values: PRIVATE | VIEW | COMMENT")}if(!e.clientId)throw new Error("'clientId' option is required");if(!e.success)throw new Error("'success' option is required");if(e.allowCreateAnonymousBoards&&!e.getAnonymousUserToken){if(!e.getToken)throw new Error("'getAnonymousUserToken' option is required");console.warn("Miro boardsPicker: 'getToken' parameter will be deprecated and being replaced with 'getAnonymousUserToken'"),e.getAnonymousUserToken=e.getToken}if(e.embedMode&&!u.includes(e.embedMode))throw new Error(`Unsupported 'embedMode' value: "${e.embedMode}". Supported values: ${JSON.stringify(u)}.`)}(o);let t=function(){};const _=()=>{n().close()},c=function(){const e=window.crypto||window.msCrypto;if(e&&e.getRandomValues){const o=new Uint8Array(16);return e.getRandomValues(o),o[6]|=64,o[6]&=79,o[8]|=128,o[8]&=191,s(o[0])+s(o[1])+s(o[2])+s(o[3])+"-"+s(o[4])+s(o[5])+"-"+s(o[6])+s(o[7])+"-"+s(o[8])+s(o[9])+"-"+s(o[10])+s(o[11])+s(o[12])+s(o[13])+s(o[14])+s(o[15])}return function(){const e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",o="0123456789abcdef";let n=0,t="";for(let a=0;a<36;a++)"-"!==e[a]&&"4"!==e[a]&&(n=16*Math.random()|0),"x"===e[a]?t+=o[n]:"y"===e[a]?(n&=3,n|=8,t+=o[n]):t+=e[a];return t}()}(),T=new URL(C.toString());T.searchParams.append("guid",c),T.searchParams.append("action",o.action),T.searchParams.append("clientId",o.clientId),T.searchParams.append("postMessageUrlOpener",o.onOpenUrl?"true":"false"),o.embedMode&&T.searchParams.append("embedMode",o.embedMode),o.accessToken&&T.searchParams.append("accessToken",o.accessToken),void 0!==o.hideLogo&&T.searchParams.append("hideLogo",`${o.hideLogo}`),void 0!==o.legacyPicker&&T.searchParams.append("legacyPicker",`${o.legacyPicker}`);const A=o.mockExperiments;return void 0!==A&&Object.keys(A).forEach((e=>{const o=A[e];void 0!==o&&T.searchParams.append(`split_exp_${e}`,`${o}`)})),"get-access-link"===o.action&&T.searchParams.append("accessLinkOptions",JSON.stringify(o.accessLinkOptions)),o.getBase64&&T.searchParams.append("getBase64",`${o.getBase64}`),o.allowCreateAnonymousBoards&&T.searchParams.append("allowCreateAnonymousBoards",`${o.allowCreateAnonymousBoards}`),o.notAuthorized&&T.searchParams.append("authControlledByIntegration","true"),n=o.iframeContainer?function(e,o){const n=o instanceof HTMLElement?o:document.getElementById(o),t=document.createElement("iframe");if(null===n)throw new Error("IFrame container element not found");return t.src=e,n.appendChild(t),()=>t.contentWindow}(T.toString(),o.iframeContainer):function(e,o){let n;if(o)n=o,n.location.replace(e);else{const o=function(e=450,o=650){const n=void 0!==window.screenLeft?window.screenLeft:window.screenX,t=void 0!==window.screenTop?window.screenTop:window.screenY;return{left:n+window.outerWidth/2-e/2,top:t+window.outerHeight/2-o/2}}();n=window.open(e,"_blank",`width=450,height=650,left=${o.left},top=${o.top},menubar=0,toolbar=0,location=0,personalbar=0,status=0`)}return()=>n}(T.toString(),o.windowRef),window.addEventListener("message",(s=>{if(s.source===n()&&s.data.guid===c)switch(s.data.type){case e.NOAUTH:t(),o.notAuthorized&&o.notAuthorized();break;case e.READY:t=function(e,o){let n=-1;const t=()=>{clearInterval(n)};return o&&(e?n=setInterval((()=>{e.closed&&(t(),o())}),100):o()),t}(n(),o.cancel),n().postMessage(new a(c),s.origin),o.ready&&o.ready();break;case e.PICK:if(t(),o.success){const e=s.data.payload,n=e.workspace,t=e.id,a={id:t,name:e.title,viewLink:L({workspace:n,boardId:t})};o.action!==E.ACCESS_LINK&&o.action!==E.GET_ACCESS_LINK||(a.accessLink=function(e){const o=S(e.workspace),n=new URL(`${o}/app/live-embed/${e.boardId}/`);return e.accessLinkToken&&n.searchParams.set(d.BOARD_ACCESS_TOKEN,e.accessLinkToken),e.autoplay&&n.searchParams.set(O.AUTO_PLAY,"true"),e.liveEmbedMode&&n.searchParams.set(d.EMBED_MODE,e.liveEmbedMode),n.toString()}({workspace:n,boardId:t,accessLinkToken:e.accessLink.token,autoplay:!0,liveEmbedMode:e.liveEmbedMode}),a.accessLinkPolicy=e.accessLink.sharingPolicy,a.embedHtml=function(e){const o=document.createElement("iframe");return o.className="miro-embedded-board",o.src=e.boardUrl,o.referrerPolicy="no-referrer-when-downgrade",o.style.background="transparent",o.style.border="1px solid #ccc",o.allowFullscreen=!0,o.allow="fullscreen; clipboard-read; clipboard-write",function(e){let o=e.outerHTML;return o=o.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/{<!-- -->/g,"{").replace(/&nbsp;/g," ").replace(/&#(\d+);/gm,((e,o)=>String.fromCharCode(o))),o=decodeURIComponent(o),o=o.replace(/=""( |$|>|\/)/g,"$1"),o}(o)}({boardUrl:a.accessLink})),e.boardImgBase64&&(a.boardImgBase64=e.boardImgBase64),o.success(a)}_();break;case e.NEED_TOKEN:(function(e){return e.getAnonymousUserToken?e.getAnonymousUserToken():Promise.resolve("undefined")})(o).then((e=>{n().postMessage(new r(c,e),s.origin)})).catch((e=>{console.error("Failed to get Miro anonnymous user access token in getAnonymousUserToken(), error:",e),n().postMessage(new i(c,e),s.origin)}));break;case e.ERROR:t(),o.error&&o.error(s.data.payload);break;case e.OPEN_URL:o.onOpenUrl&&o.onOpenUrl(s.data.payload.url)}})),{close:_}}}})();